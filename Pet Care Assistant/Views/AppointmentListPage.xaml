<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Pet_Care_Assistant.Views.AppointmentListPage"
             Title="Appointments">

    <VerticalStackLayout Padding="20" Spacing="15">

        <!-- Filter Section -->
        <Label Text="Filter appointments by:" FontAttributes="Bold" />
        <Picker Title="Select Filter"
                ItemsSource="{Binding FilterOptions}"
                SelectedItem="{Binding SelectedFilter}"
                SelectedIndexChanged="OnFilterChanged" />

        <!-- Appointment List -->
        <CollectionView ItemsSource="{Binding FilteredAppointments}"
                        SelectionChanged="OnAppointmentSelected">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="5" Padding="10" BorderColor="#cccccc">
                        <VerticalStackLayout Spacing="5">
                            <Label Text="{Binding PetName}" FontAttributes="Bold" />
                            <Label Text="{Binding ClinicName}" />
                            <Label Text="{Binding Date, StringFormat='{0:dd MMM yyyy, HH:mm}'}" />
                            <Label Text="{Binding Reason}" FontAttributes="Italic" />
                            <Button Text="Finish"
                                    BackgroundColor="#ff6666"
                                    TextColor="White"
                                    Clicked="OnFinishAppointmentClicked"
                                    CornerRadius="10" />
                        </VerticalStackLayout>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Buttons -->
        <Button Text="Add Appointment"
                BackgroundColor="#4CAF50"
                TextColor="White"
                Clicked="OnAddAppointmentClicked"
                CornerRadius="10" />

        <!--<Button Text="View Stats"
                BackgroundColor="#2196F3"
                TextColor="White"
                Clicked="OnViewStatsClicked"
                CornerRadius="10" />-->

        <Button Text="Scroll to Top"
                BackgroundColor="LightGray"
                TextColor="Black"
                Clicked="OnScrollToTopClicked"
                CornerRadius="10" />
    </VerticalStackLayout>
</ContentPage>
