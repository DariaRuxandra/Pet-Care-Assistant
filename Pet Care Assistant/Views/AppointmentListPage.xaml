<ContentPage
    x:Class="Pet_Care_Assistant.Views.AppointmentListPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Appointments">

    <ScrollView x:Name="MainScrollView">
        <VerticalStackLayout Padding="20" Spacing="10">

            <Button Text="View Stats"
                    Clicked="OnViewStatsClicked"
                    HorizontalOptions="Center" />

            <Button Text="Add Appointment"
                    Clicked="OnAddAppointmentClicked"
                    HorizontalOptions="Center" />

            <Picker Title="Filter by"
                    ItemsSource="{Binding FilterOptions}"
                    SelectedItem="{Binding SelectedFilter}"
                    SelectedIndexChanged="OnFilterChanged"
                    HorizontalOptions="Fill"
                    Margin="0,10,0,10" />

            <CollectionView
                ItemsSource="{Binding FilteredAppointments}"
                SelectionMode="Single"
                SelectionChanged="OnAppointmentSelected">

                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="10" Margin="5" BorderColor="LightGray" CornerRadius="10">
                            <VerticalStackLayout>
                                <Label Text="{Binding PetName}" FontAttributes="Bold" />
                                <Label Text="{Binding ClinicName}" />
                                <Label Text="{Binding Date, StringFormat='{}{0:dd MMM yyyy, HH:mm}'}" />
                                <Label Text="{Binding Reason}" FontAttributes="Italic" />
                                <Button Text="Finish"
                                        Clicked="OnFinishAppointmentClicked"
                                        HorizontalOptions="End"
                                        FontSize="12" />
                            </VerticalStackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!--<Button Text="Scroll to Top"
                    Clicked="OnScrollToTopClicked"
                    HorizontalOptions="Center"
                    Margin="0,20,0,0" />-->
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
