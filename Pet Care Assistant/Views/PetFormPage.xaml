<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:Pet_Care_Assistant.ViewModels"
             xmlns:models="clr-namespace:Pet_Care_Assistant.Models"
             x:Class="Pet_Care_Assistant.Views.PetFormPage"
             Title="All pets"
             >
    
    <VerticalStackLayout Padding="15" Spacing="15">

        <SearchBar Placeholder="Search pets by name..."
                   Text="{Binding SearchText}"
                   FontSize="14"
                   BackgroundColor="White"
                   Margin="0,0,0,5"
                   SearchCommand="{Binding SearchCommand}"
                   CancelButtonColor="#888"/>

        
        <CollectionView ItemsSource="{Binding FilteredPetsList}" SelectionMode="None">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <VerticalStackLayout Spacing="0" Margin="0,0,0,12">
                        <Frame Padding="8"
                               BackgroundColor="White"
                               BorderColor="#E0E0E0"
                               CornerRadius="12"
                               HasShadow="True">
                            <Grid ColumnDefinitions="80, *" RowDefinitions="Auto,Auto,Auto,Auto">
                                <Image Source="{Binding PhotoPath}" 
                                       HeightRequest="60"
                                       WidthRequest="60"
                                       Aspect="AspectFill"
                                       VerticalOptions="Start"
                                       HorizontalOptions="Center"
                                       Margin="0,0,10,0">
                                    <Image.Clip>
                                        <EllipseGeometry Center="30,30" RadiusX="30" RadiusY="30"/>
                                    </Image.Clip>
                                </Image>

                                <VerticalStackLayout Grid.Column="1" Spacing="2">
                                    <Label Text="{Binding Name}" 
                                           FontAttributes="Bold" 
                                           FontSize="16" 
                                           TextColor="#333"/>
                                    <Label Text="{Binding Breed}" 
                                           FontSize="13" 
                                           TextColor="#666"/>
                                    <Label Text="{Binding AgeDisplayDetailed}" 
                                           FontSize="13" 
                                           TextColor="#666"/>
                                    <Label Text="{Binding OwnerName, StringFormat='Owner: {0}'}" 
                                           FontSize="13" 
                                           TextColor="#666"/>
                                    <Label Text="{Binding OwnerContact, StringFormat='Contact: {0}'}" 
                                           FontSize="13" 
                                           TextColor="#666"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                    </VerticalStackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>
    </VerticalStackLayout>
</ContentPage>